# SpringBoot AWS 책 - Chapter 10

## 24시간 중단없는 무중단 배포 방식

### 무중단 배포 방식

- AWS Blue-Green 무중단 배포 (비싼것이 단점이고 좋다)

- 도커를 이용한 웹서비스 무중단 배포

- L4 스위치 활용

- Nginx (웹서버,

   

### 리버스프록시

* 캐싱, 로드밸런싱, 미디어스트리밍 등을 위한 오픈소스 소프트웨어) 이용 
* Nginx 80, 443 포트 (8081 혹은 8082를 연동was로 설정 체인지 & nginx reload )
* 스프링부트1 - 8081 포트
* 스프링부트2 - 8082 포트

![image-20200204084530036](/Users/icarus/Library/Application Support/typora-user-images/image-20200204084530036.png)



### nginx 설치와 SpringBoot 연동하기

#### Nginx 설치

```
sudo yum install nginx
sudo service nginx start
```

#### 보안그룹 추가

> EC2 > 보안그룹 -> EC2 보안그룹선택 -> 인바운드 편집
>
> 80포트 인바운드 규칙 추가

* 8080 -> 80으로 전환되도록 변경된 리다이렉션 주소를 구글과 네이버에 등록
* 이제 8080포트를 제거하고, 80으로 접속 테스트

```
sudo vim /etc/nginx/nginx.conf
...
location / {
	proxy_pass $service_url;
	...
}

sudo service nginx restart
```



### 무중단 배포 스크립트 만들기

